### 기존의 문제점

재설치후에는 중복되는 리소스를 모조리 받아야 함

쓰지않는 리소스까지 받아야 함

-> 심각한 네트워크 공간 낭비



### 해결 방법

* 중복되는 데이터는 새로 받지 않고 재활용한다 : OBB
* 사용되지 않을 것 같은 리소스는 아예 받지 않는 방법 : AAB



### OBB?

불투명 바이너리 큰 개체

리소스 파일들(blob)을 압축한 파일

따라서 APK 파일과는 별도로 보관되는 리소스 묵음 파일

주로 고해상도 게임같은, GigaByte 단위의 초 대용량 리소스를 관리하는데 사용

* OBB 왜쓸까?
  * 리소스 규모가 큰 APP의 등장으로 인해.
  * 또한 버그는 주로 리소스가 아닌, 코드의 로직에서 발생한다.
* OBB의 장점
  * 로직만 재설치가 가능
  * 리소스 파일은 다른 앱에서도 접근이 가능
* OBB의 단점
  * 단일 APK보다 구현이 까다로움
    * R. ... 이게 안됨
  * OBB 파일 손상 시 정상적인 앱 구동 불가
* OBB와 R 구분 기준?
  * 개발자가 다 구현을 할 경우에는, 개발자의 재량



#### OBB 요약

* 소스와 리소스를 구분하기 위해 나온 개념



### AAB?

Android App Bundle (안드로이드 앱 꾸러미)

모든 코드와 리소스 등을 압축한 파일

실행 될 기기의 환경에 맞추어 APK로 추출 가능한 파일의 원본



* 왜써
  * 실제로 빌드된 APK에서 사용하는 리소스는 일부분
    * Youtube는 볼려고 다운받지 동영상 볼려고 다운받지는 않아
  * 다양한 아키텍처를 지원하는 APK 파일
    * ARM, x86 ...
  * 이처럼 낭비되는 것이 있다



* 장점
  * 다양한 환경 및 아키텍처를 단일 파일로 관리
  * APK 설치 파일 다운로드 용량 감소
  * 필요하지 않은 기능은 설치시 다운로드 안함
* 단점
  * 최신 Android studio 및 Gradle 등에서만 지원
  * 기기 설정 변경 시 추가 리소스 다운로드 필요
    * Dynamic deliver
      * 추가 리소스가 필요할 경우, 자동으로 해당 리소스만 받아주는 기능
      * 기기의 해상도가 바뀌거나, 언어가 바뀌거나 등 하면 해당 리소스만 받음
    * Dynamic feature
      * API 22 이상
      * 앱에 들어간 라이브러리/모듈을 설치 시 받지 않고, 해당 기능을 실행하기 직전에 따로 받는 기능
      * 아직 베타 버전
      * 앱의 경량화에 많은 도움이 될 것
* AAB의 구성
  * Base APK: 말그대로 로직이 있는 기본 apk
  * Configuration APK: 해사옫별, 언어별로 나눠져잇는 apk, 필요한거 땡겨쓴다
* [실습](https://codelabs.developers.google.com/codelabs/your-first-dynamic-app/index.html#0)

* [Android bundle tool](https://developer.android.com/studio/command-line/bundletool)

